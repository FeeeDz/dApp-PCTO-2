/*!
 * @license :@maticnetwork/maticjs-plasma - V1.0.3 - 03/02/2022
 * https://github.com/maticnetwork/maticjs-plasma
 * Copyright (c) 2022 @polygon; Licensed MIT
 */
module.exports=function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=1)}([function(t,r){t.exports=require("@maticnetwork/maticjs")},function(t,r,e){"use strict";e.r(r),e.d(r,"PlasmaClient",(function(){return m}));var n,o=e(0);!function(t){t.Erc20WithdrawEventSig="0xebff2602b3f468259e1e99f613fed6691f3a6526effe6ef3e768ba7ae7a36c4f",t.Erc721WithdrawEventSig="0x9b1bfa7fa9ee420a16e124f794c35ac9f90472acc99140eb2f6447c714cad8eb"}(n||(n={}));var i,a=(i=function(t,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)},function(t,r){function e(){this.constructor=t}i(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}),c=function(t){function r(r,e){return t.call(this,{isParent:!0,address:e,name:"DepositManager"},r)||this}return a(r,t),Object.defineProperty(r.prototype,"address",{get:function(){return this.contractParam.address},enumerable:!1,configurable:!0}),r}(o.BaseToken),s=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),u=function(t){function r(r,e,n){return t.call(this,{isParent:!0,address:e,name:n},r)||this}return s(r,t),r}(o.BaseToken),p=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),f=function(t){function r(r,e){return t.call(this,{isParent:!0,address:e,name:"Registry"},r)||this}return p(r,t),r}(o.BaseToken),h=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),d=function(t){function r(r,e){return t.call(this,{isParent:!0,address:e,name:"WithdrawManager"},r)||this}return h(r,t),r.prototype.withdrawExit=function(t,r){var e=this;return this.getContract().then((function(n){var o;return o=Array.isArray(t)?n.method("processExitsBatch",t):n.method("processExits",t),e.processWrite(o,r)}))},r}(o.BaseToken),l=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),y=function(t){function r(r,e,n){var o=t.call(this,r,e)||this;return o.getHelperContracts=n,o}return l(r,t),r.prototype.fetchPredicate=function(t,r,e){var n=this;if(this.predicate_)return Object(o.promiseResolve)(this.predicate_);return(e?Object(o.promiseResolve)(e):n.getHelperContracts().registry.getContract().then((function(r){return r.method(t).read()}))).then((function(t){return new u(n.client,t,r).getContract()})).then((function(t){return n.predicate_=t,t}))},r.prototype.withdrawExit=function(t){return this.getHelperContracts().withdrawManager.withdrawExit(this.contractParam.address,t)},r}(o.BaseToken),w=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),v=function(t){function r(r,e,n,o){var i="0x0000000000000000000000000000000000001010"===r?"MRC20":"ChildERC20";return t.call(this,{isParent:e,address:r,name:i},n,o)||this}return w(r,t),r.prototype.getPredicate=function(){return this.fetchPredicate("erc20Predicate","ERC20Predicate",this.client.config.erc20Predicate)},r.prototype.getBalance=function(t,r){var e=this;return void 0===r&&(r={}),this.getContract().then((function(n){var o=n.method("balanceOf",t);return e.processRead(o,r)}))},r.prototype.getAllowance=function(t,r){var e=this;void 0===r&&(r={});var n=r.spenderAddress;return this.getContract().then((function(o){var i=o.method("allowance",t,n||e.getHelperContracts().depositManager.address);return e.processRead(i,r)}))},r.prototype.approve=function(t,r){var e=this;void 0===r&&(r={});var n=r.spenderAddress;return n||this.contractParam.isParent||this.client.logger.error(o.ERROR_TYPE.NullSpenderAddress).throw(),this.getContract().then((function(i){var a=i.method("approve",n||e.getHelperContracts().depositManager.address,o.Converter.toHex(t));return e.processWrite(a,r)}))},r.prototype.approveMax=function(t){return void 0===t&&(t={}),this.approve(o.MAX_AMOUNT,t)},r.prototype.deposit=function(t,r,e){var n=this;return void 0===e&&(e={}),this.checkForRoot("deposit"),this.getHelperContracts().depositManager.getContract().then((function(i){var a=i.method("depositERC20ForUser",n.contractParam.address,r,o.Converter.toHex(t));return n.processWrite(a,e)}))},r.prototype.depositEther_=function(t,r){var e=this;return void 0===r&&(r={}),this.checkForRoot("depositEther"),this.getHelperContracts().depositManager.getContract().then((function(n){r.value=o.Converter.toHex(t);var i=n.method("depositEther");return e.processWrite(i,r)}))},r.prototype.withdrawStart=function(t,r){var e=this;return void 0===r&&(r={}),this.checkForChild("withdrawStart"),"0x0000000000000000000000000000000000001010"===this.contractParam.address&&(r.value=o.Converter.toHex(t)),this.getContract().then((function(n){var i=n.method("withdraw",o.Converter.toHex(t));return e.processWrite(i,r)}))},r.prototype.withdrawConfirm_=function(t,r,e){var o=this;return this.checkForRoot("withdrawConfirm"),Promise.all([this.getPredicate(),this.getHelperContracts().exitUtil.buildPayloadForExit(t,n.Erc20WithdrawEventSig,r)]).then((function(t){var r=t[0],n=t[1],i=r.method("startExitWithBurntTokens",n);return o.processWrite(i,e)}))},r.prototype.withdrawConfirm=function(t,r){return this.withdrawConfirm_(t,!1,r)},r.prototype.withdrawConfirmFaster=function(t,r){return this.withdrawConfirm_(t,!0,r)},r.prototype.transfer=function(t,r,e){return void 0===e&&(e={}),"0x0000000000000000000000000000000000001010"===this.contractParam.address?(e.to=r,e.value=o.Converter.toHex(t),this.sendTransaction(e)):this.transferERC20(r,t,e)},r}(y),_=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),g=function(t){function r(r,e,n,o){return t.call(this,{isParent:e,address:r,name:"ChildERC721"},n,o)||this}return _(r,t),r.prototype.getTokensCount=function(t,r){var e=this;return this.getContract().then((function(n){var o=n.method("balanceOf",t);return e.processRead(o,r)})).then((function(t){return Number(t)}))},r.prototype.getTokenIdAtIndexForUser=function(t,r,e){var n=this;return this.getContract().then((function(o){var i=o.method("tokenOfOwnerByIndex",r,t);return n.processRead(i,e)}))},r.prototype.safeDeposit=function(t,r,e){var n=this;return this.checkForRoot("safeDeposit"),this.getContract().then((function(o){var i=o.method("safeTransferFrom",r,n.getHelperContracts().depositManager.address,t);return n.processWrite(i,e)}))},r.prototype.withdrawStart=function(t,r){var e=this;return void 0===r&&(r={}),this.checkForChild("withdrawStart"),this.getContract().then((function(n){var i=n.method("withdraw",o.Converter.toHex(t));return e.processWrite(i,r)}))},r.prototype.getPredicate=function(){return this.fetchPredicate("erc721Predicate","ERC721Predicate",this.client.config.erc721Predicate)},r.prototype.withdrawConfirm_=function(t,r,e){var o=this;return this.checkForRoot("withdrawConfirm"),Promise.all([this.getPredicate(),this.getHelperContracts().exitUtil.buildPayloadForExit(t,n.Erc721WithdrawEventSig,r)]).then((function(t){var r=t[0],n=t[1];console.log("address",r.address);var i=r.method("startExitWithBurntTokens",n);return o.processWrite(i,e)}))},r.prototype.withdrawConfirm=function(t,r){return this.withdrawConfirm_(t,!1,r)},r.prototype.withdrawConfirmFaster=function(t,r){return this.withdrawConfirm_(t,!0,r)},r.prototype.transfer=function(t,r,e,n){return this.transferERC721(r,e,t,n)},r.prototype.getAllTokens=function(t){var r=this;return this.getTokensCount(t).then((function(e){e=Number(e);for(var n=[],o=0;o<e;o++)n.push(r.getTokenIdAtIndexForUser(o,t));return Promise.all(n)}))},r}(y),C=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),m=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return C(r,t),r.prototype.init=function(t){var r=this,e=this.client;return e.init(t).then((function(n){var i=e.mainPlasmaContracts;e.config=t=Object.assign({rootChain:i.RootChainProxy,registry:i.Registry,depositManager:i.DepositManagerProxy,withdrawManager:i.WithdrawManagerProxy},t);var a=new o.RootChain(e,t.rootChain);return r.registry=new f(e,t.registry),r.depositManager=new c(e,t.depositManager),r.exitUtil=new o.ExitUtil(e,a),r.withdrawManager=new d(e,t.withdrawManager),r}))},r.prototype.getContracts_=function(){return{depositManager:this.depositManager,exitUtil:this.exitUtil,registry:this.registry,withdrawManager:this.withdrawManager}},r.prototype.erc20=function(t,r){return new v(t=null!=t||r?t:"0x0000000000000000000000000000000000001010",r,this.client,this.getContracts_.bind(this))},r.prototype.erc721=function(t,r){return new g(t,r,this.client,this.getContracts_.bind(this))},r.prototype.withdrawExit=function(t,r){return this.withdrawManager.withdrawExit(t,r)},r.prototype.depositEther=function(t,r){return new v("",!0,this.client,this.getContracts_.bind(this)).depositEther__(t,r)},r}(o.BridgeClient)}]);
//# sourceMappingURL=matic-plasma.node.min.js.map